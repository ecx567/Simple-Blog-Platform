{% extends 'base.html' %}

{% block title %}Etiquetas - Blog Platform{% endblock %}

{% block content %}
<h1 class="mb-4"><i class="bi bi-tags"></i> Etiquetas</h1>

<p class="lead text-muted">Explora las publicaciones por etiqueta</p>

<!-- Tag Cloud -->
<div class="card shadow-sm mb-4">
    <div class="card-body">
        <h5 class="card-title">Nube de Etiquetas</h5>
        <div class="tag-cloud">
            {% for tag in tags %}
            <a href="{% url 'post_list' %}?tag={{ tag.slug }}" 
               class="badge bg-secondary me-2 mb-2 tag-badge" 
               style="font-size: {% widthratio tag.post_count max_count 100 %}%;">
                {{ tag.name }} ({{ tag.post_count }})
            </a>
            {% empty %}
            <p class="text-muted">No hay etiquetas disponibles.</p>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Tags Grid -->
<div class="row g-3">
    {% for tag in tags %}
    <div class="col-md-3">
        <div class="card h-100 shadow-sm hover-shadow">
            <div class="card-body text-center">
                <i class="bi bi-tag fs-2 text-secondary"></i>
                <h6 class="mt-2 mb-3">{{ tag.name }}</h6>
                <span class="badge bg-secondary mb-2">{{ tag.post_count }} publicacion{{ tag.post_count|pluralize:"es" }}</span>
                <br>
                <a href="{% url 'post_list' %}?tag={{ tag.slug }}" class="btn btn-sm btn-outline-secondary mt-2">
                    Ver publicaciones
                </a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<!-- Popular Tags Section -->
{% if popular_tags %}
<div class="mt-5">
    <h3 class="mb-4"><i class="bi bi-star"></i> Etiquetas Populares</h3>
    <div class="d-flex flex-wrap gap-2">
        {% for tag in popular_tags %}
        <a href="{% url 'post_list' %}?tag={{ tag.slug }}" 
           class="btn btn-outline-secondary">
            {{ tag.name }} <span class="badge bg-secondary">{{ tag.post_count }}</span>
        </a>
        {% endfor %}
    </div>
</div>
{% endif %}

{% endblock %}

{% block extra_css %}
<style>
.tag-cloud {
    line-height: 2.5;
}

.tag-badge {
    display: inline-block;
    padding: 0.5em 0.8em;
    text-decoration: none;
    transition: all 0.3s ease;
}

.tag-badge:hover {
    transform: scale(1.1);
    background-color: #0d6efd !important;
}

.hover-shadow {
    transition: box-shadow 0.3s ease-in-out;
}

.hover-shadow:hover {
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
}
</style>
{% endblock %}
